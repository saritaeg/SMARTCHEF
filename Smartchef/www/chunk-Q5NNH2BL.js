import{c as E,f as k,i as T,k as U,q as F}from"./chunk-PJSZZG6W.js";import{A as u,B as _,Ia as V,L as a,Ma as S,S as M,U as b,Va as O,W as o,X as n,Y as w,Ya as W,aa as x,ba as h,ca as y,cb as R,ja as l,oa as c,pa as p,qa as g,sa as v,t as C,u as P}from"./chunk-GQMZDQVR.js";import"./chunk-JHI3MBHO.js";function L(m,s){if(m&1){let r=x();o(0,"div",14)(1,"input",15),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.nombre,t)||(e.nombre=t),_(t)}),n(),o(2,"input",16),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.cantidad,t)||(e.cantidad=t),_(t)}),n(),o(3,"input",17),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.unidad,t)||(e.unidad=t),_(t)}),n(),o(4,"input",18),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.categoria,t)||(e.categoria=t),_(t)}),n(),o(5,"button",11),h("click",function(){let t=u(r).index,e=y();return _(e.eliminarIngrediente(t))}),l(6,"Eliminar"),n()()}if(m&2){let r=s.$implicit;a(),c("ngModel",r.nombre),a(),c("ngModel",r.cantidad),a(),c("ngModel",r.unidad),a(),c("ngModel",r.categoria)}}function B(m,s){if(m&1){let r=x();o(0,"div",19)(1,"input",20),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.descripcion,t)||(e.descripcion=t),_(t)}),n(),o(2,"input",21),g("ngModelChange",function(t){let e=u(r).$implicit;return p(e.imagenUrl,t)||(e.imagenUrl=t),_(t)}),n(),o(3,"button",11),h("click",function(){let t=u(r).index,e=y();return _(e.eliminarPaso(t))}),l(4,"Eliminar"),n()()}if(m&2){let r=s.$implicit;a(),c("ngModel",r.descripcion),a(),c("ngModel",r.imagenUrl)}}var J=(()=>{let s=class s{constructor(){this.router=C(W),this.route=C(O),this.recetaService=C(R),this.titulo="",this.descripcion="",this.ingredientes=[],this.pasos=[],this.fotoUrl=""}ngOnInit(){this.idReceta=Number(this.route.snapshot.paramMap.get("id")),this.cargarReceta()}cargarReceta(){this.recetaService.obtenerDetalleReceta(this.idReceta).subscribe({next:i=>{this.titulo=i.nombre,this.descripcion=i.descripcion,this.ingredientes=[...i.ingredientes],this.pasos=[...i.instrucciones],this.fotoUrl=i.fotoUrl},error:i=>console.error("Error al cargar receta",i)})}anadirIngrediente(){this.ingredientes.push({nombre:"",cantidad:0,unidad:"",categoria:""})}eliminarIngrediente(i){this.ingredientes.splice(i,1)}anadirPaso(){this.pasos.push({pasoNumero:this.pasos.length+1,descripcion:"",imagenUrl:""})}eliminarPaso(i){this.pasos.splice(i,1)}confirmar(){let i={nombre:this.titulo,descripcion:this.descripcion,tiempoPreparacion:0,vegetariano:!1,sinGluten:!1,rapido:!1,economico:!1,fotoUrl:this.fotoUrl,idUsuario:1,ingredientes:this.ingredientes,instrucciones:this.pasos};this.recetaService.actualizarReceta(this.idReceta,i).subscribe({next:()=>this.router.navigate(["/vista9",this.idReceta]),error:t=>console.error("Error al actualizar receta",t)})}volver(){this.router.navigate(["/vista9",this.idReceta])}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=P({type:s,selectors:[["app-vista10"]],standalone:!0,features:[v],decls:25,vars:5,consts:[[1,"vista10"],[1,"top-bar"],[1,"icon-left",3,"click"],["src","assets/logosmartchef.png",1,"logo"],[1,"icon-right"],[1,"divider"],["type","text","placeholder","URL de la imagen",1,"hero-input",3,"ngModelChange","ngModel"],["placeholder","T\xEDtulo de la receta",1,"input-titulo",3,"ngModelChange","ngModel"],["placeholder","Descripci\xF3n de la receta",1,"input-desc",3,"ngModelChange","ngModel"],[1,"section-card"],["class","ingrediente-edit",4,"ngFor","ngForOf"],[3,"click"],["class","paso-edit",4,"ngFor","ngForOf"],[1,"btn-confirm",3,"click"],[1,"ingrediente-edit"],["placeholder","Ingrediente",3,"ngModelChange","ngModel"],["type","number","placeholder","Cantidad",3,"ngModelChange","ngModel"],["placeholder","Unidad (g, ml, ud...)",3,"ngModelChange","ngModel"],["placeholder","Categor\xEDa",3,"ngModelChange","ngModel"],[1,"paso-edit"],["placeholder","Descripci\xF3n del paso",3,"ngModelChange","ngModel"],["placeholder","URL imagen del paso (opcional)",3,"ngModelChange","ngModel"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"header",1)(2,"div",2),h("click",function(){return e.volver()}),l(3,"\u276E"),n(),w(4,"img",3)(5,"div",4),n(),w(6,"div",5),o(7,"input",6),g("ngModelChange",function(d){return p(e.fotoUrl,d)||(e.fotoUrl=d),d}),n(),o(8,"input",7),g("ngModelChange",function(d){return p(e.titulo,d)||(e.titulo=d),d}),n(),o(9,"textarea",8),g("ngModelChange",function(d){return p(e.descripcion,d)||(e.descripcion=d),d}),l(10,"  "),n(),o(11,"div",9)(12,"h3"),l(13,"Ingredientes"),n(),M(14,L,7,4,"div",10),o(15,"button",11),h("click",function(){return e.anadirIngrediente()}),l(16,"+ A\xF1adir ingrediente"),n()(),o(17,"div",9)(18,"h3"),l(19,"Preparaci\xF3n paso a paso"),n(),M(20,B,5,2,"div",12),o(21,"button",11),h("click",function(){return e.anadirPaso()}),l(22,"+ A\xF1adir paso"),n()(),o(23,"button",13),h("click",function(){return e.confirmar()}),l(24," Guardar cambios "),n()()),t&2&&(a(7),c("ngModel",e.fotoUrl),a(),c("ngModel",e.titulo),a(),c("ngModel",e.descripcion),a(5),b("ngForOf",e.ingredientes),a(6),b("ngForOf",e.pasos))},dependencies:[S,V,F,E,U,k,T],styles:['@charset "UTF-8";.vista10[_ngcontent-%COMP%]{min-height:100vh;padding-bottom:100px;background:linear-gradient(#c3e3ff 0% 270px,#fff 270px 100%);text-align:center;font-family:Roboto,sans-serif}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:18px 20px}.logo[_ngcontent-%COMP%]{height:45px}.divider[_ngcontent-%COMP%]{width:100%;height:1px;background:#fff}.hero-input[_ngcontent-%COMP%], .input-titulo[_ngcontent-%COMP%], .input-desc[_ngcontent-%COMP%], .ingrediente-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .paso-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:12px;margin:8px 0;border-radius:14px;border:1px solid #94c7ff;background:#fff;font-size:14px;color:#3b5f77;box-shadow:0 2px 4px #00000014;outline:none}.input-desc[_ngcontent-%COMP%]{height:80px;resize:none}.section-card[_ngcontent-%COMP%]{width:90%;margin:16px auto;background:#fff;padding:16px;border-radius:14px;box-shadow:0 3px 8px #00000026}.section-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left;color:#3b5f77;font-weight:700;margin-bottom:12px}button[_ngcontent-%COMP%]{margin:4px;padding:8px 16px;border-radius:12px;border:none;background:#6ea3c1;color:#fff;font-weight:700;cursor:pointer;transition:background .2s}button[_ngcontent-%COMP%]:hover{background:#88b5ec}.btn-confirm[_ngcontent-%COMP%]{width:90%;padding:14px;margin-top:16px;border-radius:14px;font-size:16px}.ingrediente-edit[_ngcontent-%COMP%], .paso-edit[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-bottom:8px}.ingrediente-edit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .paso-edit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;padding:6px 10px;font-size:12px}.hero-input[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:12px;font-size:14px;text-align:center}']});let m=s;return m})();export{J as Vista10Component};
